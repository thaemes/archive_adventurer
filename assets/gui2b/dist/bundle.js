/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/dist/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 2);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/* no static exports found */
/* exports used: default */
/*!************************************!*\
  !*** ./~/furhat-gui/dist/index.js ***!
  \************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Furhat = void 0;\nconst furhat_core_1 = __importDefault(__webpack_require__(/*! furhat-core */ 1));\nexports.Furhat = furhat_core_1.default;\nlet furhat;\nlet portNumber;\n/**\n * FurhatGUI Function which sets up a connection to the furhat skill and gives\n * the furhat object to send and recieve events to the skill.\n * @return Promise that will return the promise with a `Furhat` obkect\n */\nconst FurhatGUI = () => new Promise((resolve, reject) => {\n    window.fetch('/port', { method: 'GET' }) // eslint-disable-line no-undef\n        .then(r => r.json())\n        .then(({ address, port }) => {\n        portNumber = port;\n        furhat = new furhat_core_1.default(address, port, 'api');\n        return furhat.init();\n    })\n        .then(() => {\n        const senseSkillGuiEvent = {\n            event_name: 'furhatos.event.senses.SenseSkillGUIConnected',\n            port: portNumber,\n        };\n        furhat.send(senseSkillGuiEvent);\n        resolve(furhat);\n    })\n        .catch((error) => reject(`Something went wrong: ${error}`));\n});\nexports.default = FurhatGUI;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vZnVyaGF0LWd1aS9kaXN0L2luZGV4LmpzPzJkNDIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZ1cmhhdCA9IHZvaWQgMDtcbmNvbnN0IGZ1cmhhdF9jb3JlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImZ1cmhhdC1jb3JlXCIpKTtcbmV4cG9ydHMuRnVyaGF0ID0gZnVyaGF0X2NvcmVfMS5kZWZhdWx0O1xubGV0IGZ1cmhhdDtcbmxldCBwb3J0TnVtYmVyO1xuLyoqXG4gKiBGdXJoYXRHVUkgRnVuY3Rpb24gd2hpY2ggc2V0cyB1cCBhIGNvbm5lY3Rpb24gdG8gdGhlIGZ1cmhhdCBza2lsbCBhbmQgZ2l2ZXNcbiAqIHRoZSBmdXJoYXQgb2JqZWN0IHRvIHNlbmQgYW5kIHJlY2lldmUgZXZlbnRzIHRvIHRoZSBza2lsbC5cbiAqIEByZXR1cm4gUHJvbWlzZSB0aGF0IHdpbGwgcmV0dXJuIHRoZSBwcm9taXNlIHdpdGggYSBgRnVyaGF0YCBvYmtlY3RcbiAqL1xuY29uc3QgRnVyaGF0R1VJID0gKCkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHdpbmRvdy5mZXRjaCgnL3BvcnQnLCB7IG1ldGhvZDogJ0dFVCcgfSkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuICAgICAgICAudGhlbihyID0+IHIuanNvbigpKVxuICAgICAgICAudGhlbigoeyBhZGRyZXNzLCBwb3J0IH0pID0+IHtcbiAgICAgICAgcG9ydE51bWJlciA9IHBvcnQ7XG4gICAgICAgIGZ1cmhhdCA9IG5ldyBmdXJoYXRfY29yZV8xLmRlZmF1bHQoYWRkcmVzcywgcG9ydCwgJ2FwaScpO1xuICAgICAgICByZXR1cm4gZnVyaGF0LmluaXQoKTtcbiAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlbnNlU2tpbGxHdWlFdmVudCA9IHtcbiAgICAgICAgICAgIGV2ZW50X25hbWU6ICdmdXJoYXRvcy5ldmVudC5zZW5zZXMuU2Vuc2VTa2lsbEdVSUNvbm5lY3RlZCcsXG4gICAgICAgICAgICBwb3J0OiBwb3J0TnVtYmVyLFxuICAgICAgICB9O1xuICAgICAgICBmdXJoYXQuc2VuZChzZW5zZVNraWxsR3VpRXZlbnQpO1xuICAgICAgICByZXNvbHZlKGZ1cmhhdCk7XG4gICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gcmVqZWN0KGBTb21ldGhpbmcgd2VudCB3cm9uZzogJHtlcnJvcn1gKSk7XG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IEZ1cmhhdEdVSTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mdXJoYXQtZ3VpL2Rpc3QvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/* no static exports found */
/* all exports used */
/*!*************************************!*\
  !*** ./~/furhat-core/dist/index.js ***!
  \*************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Furhat main class. Maintains the websocket connection to furhatOS and\n * has methods to send events, subscribe to events and helper methods such as say,\n * gesture, etc.\n *\n * @param domain IP Address for furhatOS - localhost if SDK.\n * @param port port for RealTimeAPI module of furhatOS.\n * @param route route for RealTimeAPI module of furhatOS.\n */\nclass Furhat {\n    constructor(domain, port, route) {\n        this.eventFunctions = {};\n        this.domain = domain;\n        this.port = port;\n        this.route = route;\n    }\n    /**\n     * Initializes the connection and return a promise. Await for the promise to resolve before\n     * using the object\n     */\n    init() {\n        return new Promise((resolve, reject) => {\n            this.socket = new WebSocket(`ws://${this.domain}:${this.port}/${this.route}`);\n            this.socket.onopen = () => {\n                resolve({ error: false, message: \"Success\" });\n            };\n            this.socket.onmessage = (message) => {\n                const event = JSON.parse(message.data);\n                // If a callback is available then call it\n                this.eventFunctions[event.event_name] !== undefined &&\n                    this.eventFunctions[event.event_name](event);\n            };\n            this.socket.onerror = () => {\n                reject({ error: true, message: \"Error while opening socket\" });\n            };\n        });\n    }\n    /**\n     * Method to set a callback that will be triggered `onerror` of the underlying websocket\n     * @param callback Callback function to be trigger on WebSocket connection error\n     */\n    onConnectionError(callback) { this.socket && (this.socket.onerror = callback); }\n    /**\n     * Method to set a callback that will be triggered `onclose` of the underlying websocket\n     * @param callback Callback function to be trigger on WebSocket connection close\n     */\n    onConnectionClose(callback) { this.socket && (this.socket.onclose = callback); }\n    /**\n     * Sends an event to furhatOS\n     * @param event Object containing the event. Mandtory to have event_name parameter in the object\n     */\n    send(event) {\n        var _a, _b, _c;\n        if (((_a = this.socket) === null || _a === void 0 ? void 0 : _a.readyState) === 2 || ((_b = this.socket) === null || _b === void 0 ? void 0 : _b.readyState) === 3) {\n            console.warn(\"Cannot send event. Socket is not ready.\");\n            return false;\n        }\n        else if (((_c = this.socket) === null || _c === void 0 ? void 0 : _c.readyState) === 1) {\n            this.socket.send(JSON.stringify(event));\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Subscribes to the given event and triggers the supplied callback on event\n     * @param eventName Name of the event to subscribe\n     * @param callback Function which needs to be triggered when the given event is recieved\n     * @param dontSend [Optional] [false by default] Boolean which determines wether to send\n     * the subscribe event or not. use it to set callbacks for event that are already subscribed to,\n     * for instance with group subscriptions\n     */\n    subscribe(eventName, callback, dontSend = false) {\n        const event = { event_name: 'furhatos.event.actions.ActionRealTimeAPISubscribe', name: eventName };\n        this.eventFunctions[eventName] = callback;\n        if (!dontSend) {\n            return this.send(event);\n        }\n        return true;\n    }\n    /**\n     * Subscribes to the given event group\n     * @param groupNumber Number(Assigned ENUM) of the group that needs to be subscribed to\n     */\n    subscribeGroup(groupNumber) {\n        const event = { event_name: 'furhatos.event.actions.ActionRealTimeAPISubscribe', group: groupNumber };\n        return this.send(event);\n    }\n    /**\n     * Says a given text\n     * @param text Text which needs to be said by Furhat\n     */\n    say(text) {\n        const event = { event_name: 'furhatos.event.actions.ActionSpeech', text };\n        return this.send(event);\n    }\n    /**\n     * Stimulates the speech of a user in the interaction space\n     * @param text Text which needs to be said by the user\n     */\n    userSpeech(text) {\n        const event = { event_name: 'furhatos.event.senses.SenseTypingEnd', messageText: text };\n        return this.send(event);\n    }\n    /**\n     * Stimulates SenseSpeechStart event. Can be used to stimulate user speech via typing\n     */\n    userSpeechStart() {\n        const event = { event_name: 'furhatos.event.senses.SenseTypingStart' };\n        return this.send(event);\n    }\n    /**\n     * Performs the given gesture\n     * @param name Name of the gesture that needs to be performed\n     */\n    gesture(name) {\n        const event = { event_name: 'furhatos.event.actions.ActionGesture', name };\n        return this.send(event);\n    }\n}\nexports.default = Furhat;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL34vZnVyaGF0LWNvcmUvZGlzdC9pbmRleC5qcz8yNmFmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLyoqXG4gKiBGdXJoYXQgbWFpbiBjbGFzcy4gTWFpbnRhaW5zIHRoZSB3ZWJzb2NrZXQgY29ubmVjdGlvbiB0byBmdXJoYXRPUyBhbmRcbiAqIGhhcyBtZXRob2RzIHRvIHNlbmQgZXZlbnRzLCBzdWJzY3JpYmUgdG8gZXZlbnRzIGFuZCBoZWxwZXIgbWV0aG9kcyBzdWNoIGFzIHNheSxcbiAqIGdlc3R1cmUsIGV0Yy5cbiAqXG4gKiBAcGFyYW0gZG9tYWluIElQIEFkZHJlc3MgZm9yIGZ1cmhhdE9TIC0gbG9jYWxob3N0IGlmIFNESy5cbiAqIEBwYXJhbSBwb3J0IHBvcnQgZm9yIFJlYWxUaW1lQVBJIG1vZHVsZSBvZiBmdXJoYXRPUy5cbiAqIEBwYXJhbSByb3V0ZSByb3V0ZSBmb3IgUmVhbFRpbWVBUEkgbW9kdWxlIG9mIGZ1cmhhdE9TLlxuICovXG5jbGFzcyBGdXJoYXQge1xuICAgIGNvbnN0cnVjdG9yKGRvbWFpbiwgcG9ydCwgcm91dGUpIHtcbiAgICAgICAgdGhpcy5ldmVudEZ1bmN0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLmRvbWFpbiA9IGRvbWFpbjtcbiAgICAgICAgdGhpcy5wb3J0ID0gcG9ydDtcbiAgICAgICAgdGhpcy5yb3V0ZSA9IHJvdXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgY29ubmVjdGlvbiBhbmQgcmV0dXJuIGEgcHJvbWlzZS4gQXdhaXQgZm9yIHRoZSBwcm9taXNlIHRvIHJlc29sdmUgYmVmb3JlXG4gICAgICogdXNpbmcgdGhlIG9iamVjdFxuICAgICAqL1xuICAgIGluaXQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNvY2tldCA9IG5ldyBXZWJTb2NrZXQoYHdzOi8vJHt0aGlzLmRvbWFpbn06JHt0aGlzLnBvcnR9LyR7dGhpcy5yb3V0ZX1gKTtcbiAgICAgICAgICAgIHRoaXMuc29ja2V0Lm9ub3BlbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHsgZXJyb3I6IGZhbHNlLCBtZXNzYWdlOiBcIlN1Y2Nlc3NcIiB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnNvY2tldC5vbm1lc3NhZ2UgPSAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gSlNPTi5wYXJzZShtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgICAgIC8vIElmIGEgY2FsbGJhY2sgaXMgYXZhaWxhYmxlIHRoZW4gY2FsbCBpdFxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRGdW5jdGlvbnNbZXZlbnQuZXZlbnRfbmFtZV0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50RnVuY3Rpb25zW2V2ZW50LmV2ZW50X25hbWVdKGV2ZW50KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnNvY2tldC5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlamVjdCh7IGVycm9yOiB0cnVlLCBtZXNzYWdlOiBcIkVycm9yIHdoaWxlIG9wZW5pbmcgc29ja2V0XCIgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRvIHNldCBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSB0cmlnZ2VyZWQgYG9uZXJyb3JgIG9mIHRoZSB1bmRlcmx5aW5nIHdlYnNvY2tldFxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBDYWxsYmFjayBmdW5jdGlvbiB0byBiZSB0cmlnZ2VyIG9uIFdlYlNvY2tldCBjb25uZWN0aW9uIGVycm9yXG4gICAgICovXG4gICAgb25Db25uZWN0aW9uRXJyb3IoY2FsbGJhY2spIHsgdGhpcy5zb2NrZXQgJiYgKHRoaXMuc29ja2V0Lm9uZXJyb3IgPSBjYWxsYmFjayk7IH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdG8gc2V0IGEgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIHRyaWdnZXJlZCBgb25jbG9zZWAgb2YgdGhlIHVuZGVybHlpbmcgd2Vic29ja2V0XG4gICAgICogQHBhcmFtIGNhbGxiYWNrIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIHRyaWdnZXIgb24gV2ViU29ja2V0IGNvbm5lY3Rpb24gY2xvc2VcbiAgICAgKi9cbiAgICBvbkNvbm5lY3Rpb25DbG9zZShjYWxsYmFjaykgeyB0aGlzLnNvY2tldCAmJiAodGhpcy5zb2NrZXQub25jbG9zZSA9IGNhbGxiYWNrKTsgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGFuIGV2ZW50IHRvIGZ1cmhhdE9TXG4gICAgICogQHBhcmFtIGV2ZW50IE9iamVjdCBjb250YWluaW5nIHRoZSBldmVudC4gTWFuZHRvcnkgdG8gaGF2ZSBldmVudF9uYW1lIHBhcmFtZXRlciBpbiB0aGUgb2JqZWN0XG4gICAgICovXG4gICAgc2VuZChldmVudCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgaWYgKCgoX2EgPSB0aGlzLnNvY2tldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlYWR5U3RhdGUpID09PSAyIHx8ICgoX2IgPSB0aGlzLnNvY2tldCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnJlYWR5U3RhdGUpID09PSAzKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJDYW5ub3Qgc2VuZCBldmVudC4gU29ja2V0IGlzIG5vdCByZWFkeS5cIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKChfYyA9IHRoaXMuc29ja2V0KSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MucmVhZHlTdGF0ZSkgPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMuc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoZXZlbnQpKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlcyB0byB0aGUgZ2l2ZW4gZXZlbnQgYW5kIHRyaWdnZXJzIHRoZSBzdXBwbGllZCBjYWxsYmFjayBvbiBldmVudFxuICAgICAqIEBwYXJhbSBldmVudE5hbWUgTmFtZSBvZiB0aGUgZXZlbnQgdG8gc3Vic2NyaWJlXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIEZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGJlIHRyaWdnZXJlZCB3aGVuIHRoZSBnaXZlbiBldmVudCBpcyByZWNpZXZlZFxuICAgICAqIEBwYXJhbSBkb250U2VuZCBbT3B0aW9uYWxdIFtmYWxzZSBieSBkZWZhdWx0XSBCb29sZWFuIHdoaWNoIGRldGVybWluZXMgd2V0aGVyIHRvIHNlbmRcbiAgICAgKiB0aGUgc3Vic2NyaWJlIGV2ZW50IG9yIG5vdC4gdXNlIGl0IHRvIHNldCBjYWxsYmFja3MgZm9yIGV2ZW50IHRoYXQgYXJlIGFscmVhZHkgc3Vic2NyaWJlZCB0byxcbiAgICAgKiBmb3IgaW5zdGFuY2Ugd2l0aCBncm91cCBzdWJzY3JpcHRpb25zXG4gICAgICovXG4gICAgc3Vic2NyaWJlKGV2ZW50TmFtZSwgY2FsbGJhY2ssIGRvbnRTZW5kID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSB7IGV2ZW50X25hbWU6ICdmdXJoYXRvcy5ldmVudC5hY3Rpb25zLkFjdGlvblJlYWxUaW1lQVBJU3Vic2NyaWJlJywgbmFtZTogZXZlbnROYW1lIH07XG4gICAgICAgIHRoaXMuZXZlbnRGdW5jdGlvbnNbZXZlbnROYW1lXSA9IGNhbGxiYWNrO1xuICAgICAgICBpZiAoIWRvbnRTZW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlcyB0byB0aGUgZ2l2ZW4gZXZlbnQgZ3JvdXBcbiAgICAgKiBAcGFyYW0gZ3JvdXBOdW1iZXIgTnVtYmVyKEFzc2lnbmVkIEVOVU0pIG9mIHRoZSBncm91cCB0aGF0IG5lZWRzIHRvIGJlIHN1YnNjcmliZWQgdG9cbiAgICAgKi9cbiAgICBzdWJzY3JpYmVHcm91cChncm91cE51bWJlcikge1xuICAgICAgICBjb25zdCBldmVudCA9IHsgZXZlbnRfbmFtZTogJ2Z1cmhhdG9zLmV2ZW50LmFjdGlvbnMuQWN0aW9uUmVhbFRpbWVBUElTdWJzY3JpYmUnLCBncm91cDogZ3JvdXBOdW1iZXIgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZChldmVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNheXMgYSBnaXZlbiB0ZXh0XG4gICAgICogQHBhcmFtIHRleHQgVGV4dCB3aGljaCBuZWVkcyB0byBiZSBzYWlkIGJ5IEZ1cmhhdFxuICAgICAqL1xuICAgIHNheSh0ZXh0KSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0geyBldmVudF9uYW1lOiAnZnVyaGF0b3MuZXZlbnQuYWN0aW9ucy5BY3Rpb25TcGVlY2gnLCB0ZXh0IH07XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQoZXZlbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGltdWxhdGVzIHRoZSBzcGVlY2ggb2YgYSB1c2VyIGluIHRoZSBpbnRlcmFjdGlvbiBzcGFjZVxuICAgICAqIEBwYXJhbSB0ZXh0IFRleHQgd2hpY2ggbmVlZHMgdG8gYmUgc2FpZCBieSB0aGUgdXNlclxuICAgICAqL1xuICAgIHVzZXJTcGVlY2godGV4dCkge1xuICAgICAgICBjb25zdCBldmVudCA9IHsgZXZlbnRfbmFtZTogJ2Z1cmhhdG9zLmV2ZW50LnNlbnNlcy5TZW5zZVR5cGluZ0VuZCcsIG1lc3NhZ2VUZXh0OiB0ZXh0IH07XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQoZXZlbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGltdWxhdGVzIFNlbnNlU3BlZWNoU3RhcnQgZXZlbnQuIENhbiBiZSB1c2VkIHRvIHN0aW11bGF0ZSB1c2VyIHNwZWVjaCB2aWEgdHlwaW5nXG4gICAgICovXG4gICAgdXNlclNwZWVjaFN0YXJ0KCkge1xuICAgICAgICBjb25zdCBldmVudCA9IHsgZXZlbnRfbmFtZTogJ2Z1cmhhdG9zLmV2ZW50LnNlbnNlcy5TZW5zZVR5cGluZ1N0YXJ0JyB9O1xuICAgICAgICByZXR1cm4gdGhpcy5zZW5kKGV2ZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgdGhlIGdpdmVuIGdlc3R1cmVcbiAgICAgKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBnZXN0dXJlIHRoYXQgbmVlZHMgdG8gYmUgcGVyZm9ybWVkXG4gICAgICovXG4gICAgZ2VzdHVyZShuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0geyBldmVudF9uYW1lOiAnZnVyaGF0b3MuZXZlbnQuYWN0aW9ucy5BY3Rpb25HZXN0dXJlJywgbmFtZSB9O1xuICAgICAgICByZXR1cm4gdGhpcy5zZW5kKGV2ZW50KTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBGdXJoYXQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZnVyaGF0LWNvcmUvZGlzdC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/* no static exports found */
/* all exports used */
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_furhat_gui__ = __webpack_require__(/*! furhat-gui */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_furhat_gui___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_furhat_gui__);\n\nlet reactions = {};\nlet age = null;\n\nlet currentlyEditingMessageId = null;\nlet isEmojiPickerOpen = false;\n//const emojiList = ['ðŸ˜€', 'ðŸ˜‚', 'ðŸ˜Š', 'ðŸ˜Ž', 'ðŸ˜œ', 'ðŸ˜', 'ðŸ˜˜', 'ðŸ¥³', 'ðŸ‘', 'ðŸ‘Ž'];\nconst emojiList = ['ðŸ¤©', 'ðŸ˜', 'ðŸ˜ƒ', 'ðŸ˜€', 'ðŸ™‚'];\nlet furhat = null;\nlet agePanelVisible = false;\n\nconsole.log(\"I loaded\")\n\n\n{\n    __WEBPACK_IMPORTED_MODULE_0_furhat_gui___default()()\n    .then(connection => {\n        furhat = connection;\n        furhat.subscribe('furhatos.app.base_search_agent.DataDelivery', (data) => {\n            // Activates any time i received somethÃ­ng from the FH side! DataDelivery Bby\n            console.log(data)\n            if (data.messagesLog) {\n                displayChatReactMode(data.messagesLog);\n            }\n            else if (data.videoUrl) {\n                displayVideoMode(data.videoUrl)\n            }\n            else if (data.buttons) { }\n            else {\n                document.getElementById('chatContainer').innerHTML = '';\n                document.getElementById('videoContainer').innerHTML = '';\n                if (document.getElementById(\"agePanelContainer\")) { document.getElementById(\"agePanelContainer\").innerHTML = ''; }\n                if (document.getElementById(\"readyButton\")) { document.getElementById(\"readyButtonContainer\").innerHTML = ''; }\n                console.log(\"got empty message\");\n                //displayStartButton();\n            }\n        })\n\n    })\n    .catch(console.error)\n}\n\ndocument.addEventListener('DOMContentLoaded', (event) => {\n    // Your code here will run once the DOM is fully loaded\n    displayStartButton();\n});\n\n\nfunction displayStartButton() {\n    document.body.style.backgroundColor = \"#f4f4f4\";\n    if (document.getElementById(\"agePanelContainer\")) { document.getElementById(\"agePanelContainer\").innerHTML = ''; }\n    if (document.getElementById(\"readyButton\")) { document.getElementById(\"readyButtonContainer\").innerHTML = ''; }\n    document.getElementById('videoContainer').innerHTML = '';\n    document.getElementById('chatContainer').innerHTML = '';\n\n\n    const startButton = document.createElement('button');\n    startButton.id = 'startButton';\n    startButton.innerText = 'Start!';\n    document.getElementById('flowButtonContainer').append(startButton);\n    //document.innerHTML = startButton;\n\n    startButton.addEventListener('click', function() {\n        // Send data to furhat\n        furhat.send({\n            event_name: \"ClickButton\",\n            data: 'startButton'\n        });\n\n        // Reduce the brightness of the button\n        this.style.filter = \"brightness(50%)\";\n    });\n}\n\n\nfunction displayVideoMode(input) {\n    //if(input.)\n    document.body.style.backgroundColor = \"black\";\n    document.getElementById('chatContainer').innerHTML = '';\n    document.getElementById('videoContainer').innerHTML = '';\n    if (document.getElementById(\"agePanelContainer\")) { document.getElementById(\"agePanelContainer\").innerHTML = ''; }\n    if (document.getElementById(\"readyButton\")) { document.getElementById(\"readyButtonContainer\").innerHTML = ''; }\n    if (document.getElementById(\"flowButtonContainer\")) { document.getElementById(\"flowButtonContainer\").innerHTML = ''; }\n\n    // Create a new video element\n    if (document.getElementById(\"vid\")) { document.getElementById(\"vid\").outerHTML = ''; console.log(\"old vid removed\") }\n    const video = document.createElement('video');\n\n    // Set the video's source\n    video.src = input;\n    video.controls = true;\n    video.autoplay = true;\n    video.id = \"vid\";\n\n    // Set some optional attributes, like width and height\n    video.width = 640;   // You can adjust this value\n    video.height = 480;  // You can adjust this value\n    document.getElementById('videoContainer').append(video);\n\n    const vidDoneButton = document.createElement('button');\n    vidDoneButton.id = \"vidDoneButton\";\n    vidDoneButton.innerText = \"Ik ben klaar met kijken\"\n    document.getElementById('videoContainer').append(vidDoneButton);\n\n    vidDoneButton.addEventListener('click', () =>\n        furhat.send({\n            event_name: \"ClickButton\",\n            data: 'vidDoneButton'\n        }));\n\n}\n\nfunction displayChatReactMode(input) {\n    document.body.style.backgroundColor = \"#f4f4f4\";\n    if (document.getElementById(\"flowButtonContainer\")) { document.getElementById(\"flowButtonContainer\").innerHTML = ''; }\n    document.getElementById('videoContainer').innerHTML = '';\n    if (!document.getElementById('chatContainer')) { document }\n    console.log(\"ran displaychatreactmode\");\n    reactions = {};\n    addMessagesToDOM(input)\n\n    if (!document.getElementById(\"readyButton\")) {\n        // Create a container for the button and separator\n        var readyButtonContainer = document.createElement(\"div\");\n        readyButtonContainer.id = \"readyButtonContainer\"; // Set an ID or class for styling if needed\n\n        // Create a new button element\n        var readyButton = document.createElement(\"button\");\n        readyButton.id = \"readyButton\"; // Set attributes for the button\n        readyButton.innerText = \"Ik ben klaar!\"; // You can change the button text here\n\n        // Create a separator\n        var separator = document.createElement(\"hr\");\n        separator.className = \"separator\";\n\n        // Append the separator and the button to the container\n        readyButtonContainer.appendChild(separator);\n        readyButtonContainer.appendChild(readyButton);\n\n        // Append the container to the body of the document\n        // You can change 'document.body' to append it to a different element\n        document.body.appendChild(readyButtonContainer);\n\n        // Add a click event listener to the button\n        readyButton.addEventListener('click', () => displayAgePanel()); //exportReactions());\n    }\n}\n\nfunction addMessagesToDOM(messagesJson) {\n    console.log(messagesJson)\n    var parsedData = JSON.parse(messagesJson)\n    console.log(parsedData.messages[0].text)\n\n    parsedData.messages.forEach(message => {\n        // Create divs and other elements\n        let bubbleWrapper = document.createElement('div');\n        bubbleWrapper.className = 'bubbleWrapper';\n        let inlineContainer = document.createElement('div');\n\n        if (message.who == \"robot\") {\n            inlineContainer.className = 'inlineContainer';\n\n            let icon = document.createElement('img');\n            icon.className = 'inlineIcon';\n            icon.src = 'src/rb.png'; // Adjust the source as needed\n\n            let bubble = document.createElement('div');\n            bubble.className = 'otherBubble other';\n            bubble.id = message.id;\n            bubble.textContent = message.text;\n            bubble.addEventListener('click', () => openEmojiPicker(message.id));\n\n            let reaction = document.createElement('div');\n            reaction.id = message.emojiId;\n            reaction.className = 'reaction';\n\n            let emojiOverlay = document.createElement('div');\n            emojiOverlay.className = 'emojiOverlay';\n\n            // Append child elements\n            reaction.appendChild(emojiOverlay);\n            bubble.appendChild(reaction);\n            inlineContainer.appendChild(icon);\n            inlineContainer.appendChild(bubble);\n            bubbleWrapper.appendChild(inlineContainer);\n        }\n\n        if (message.who == \"kid\") {\n            inlineContainer.className = 'inlineContainer own';\n            let icon = document.createElement('img');\n            icon.className = 'inlineIcon';\n            icon.src = 'src/jij.png'; // Adjust the source as needed\n\n            let bubble = document.createElement('div');\n            bubble.className = 'ownBubble own';\n            bubble.id = message.id;\n            bubble.textContent = message.text;\n\n            inlineContainer.appendChild(icon);\n            inlineContainer.appendChild(bubble);\n            bubbleWrapper.appendChild(inlineContainer);\n        }\n\n        reactions[message.id] = {\n            reaction: message.emojiId,\n            text: '',\n            utterance: message.text, // Store the text it was based on\n            startTime: message.startTime, // Add a startTime property if needed\n            who: message.who// Add other properties as needed\n        };\n\n        // Append to document\n        // Assuming bubbleWrapper is already defined and you want to append it to a div with the id 'chat'\n        var chatDiv = document.getElementById('chatContainer');\n        chatDiv.appendChild(bubbleWrapper);\n        updateSingleReaction(message.id);\n    });\n}\n\nfunction openEmojiPicker(messageId) {//, existingReaction = '') {\n    // BLUR CODE\n    // Set the currently editing message ID globally\n    currentlyEditingMessageId = messageId;\n\n    // Apply blur to other elements\n    const allMessages = document.querySelectorAll('.otherBubble, .ownBubble, .inlineIcon, .inlineContainer.own, .readyButton');\n    allMessages.forEach(message => {\n        if (message.id != \"\" && message.id != messageId) {\n            message.classList.add('blur');\n        }\n    });\n    ///// END of blur CODE\n\n    const readyButton = document.getElementById('readyButton');\n    if (readyButton) {\n        readyButton.style.display = 'none';\n    }\n\n    // Get the position of the selected message\n    const selectedMessage = document.getElementById(messageId);\n    if (!selectedMessage) {\n        return; // Handle the case where the selected message is not found\n    }\n\n    const selectedMessageRect = selectedMessage.getBoundingClientRect();\n\n    // Calculate the position for the emoji picker\n    const emojiPicker = document.getElementById('emojiPicker');\n    if (emojiPicker) {\n        emojiPicker.style.display = 'block';\n        emojiPicker.dataset.messageId = messageId;\n        let topPosition = selectedMessageRect.top + 120; // Initial offset, adjust as needed\n        let leftPosition = selectedMessageRect.right + 232; // Adjust the offset as needed\n\n        // Ensure the emoji picker does not exceed the screen height\n        const screenHeight = window.innerHeight;\n        const pickerHeight = emojiPicker.offsetHeight;\n\n        if (topPosition + pickerHeight > screenHeight) {\n            topPosition = screenHeight - pickerHeight;\n        }\n        const minimumTopOffset = 20; // Adjust as needed\n        topPosition = Math.max(minimumTopOffset, topPosition);\n\n\n        // Set the final position of the emoji picker\n        emojiPicker.style.top = `${Math.max(0, topPosition)}px`;\n        emojiPicker.style.left = `${Math.max(0, leftPosition)}px`;\n    }\n\n    if (!reactions[messageId]) {\n        reactions[messageId] = { reaction: '' };\n    }\n\n    const existingReaction = reactions[messageId].reaction;\n\n    const emojiContainer = document.querySelector('.emojiContainer');\n    emojiContainer.innerHTML = '';\n\n    emojiList.forEach(emoji => {\n        const emojiSpan = document.createElement('span');\n        emojiSpan.classList.add('emoji');\n        emojiSpan.textContent = emoji;\n        emojiSpan.dataset.emoji = emoji;\n\n        if (existingReaction === emoji) {\n            emojiSpan.classList.add('selected');\n        }\n\n        emojiSpan.onclick = () => selectEmoji(emoji);\n        emojiContainer.appendChild(emojiSpan);\n    });\n\n    const existingText = reactions[messageId].text || '';\n\n    const reactionTextField = document.getElementById('additionalTextField');\n    if (reactionTextField) {\n        reactionTextField.value = existingText;\n    }\n\n    let rem = document.getElementById(\"removeButton\")\n    rem.addEventListener('click', () => deselectEmoji());\n\n    let close = document.getElementById(\"closeButton\")\n    close.addEventListener('click', () => closeEmojiPicker());\n\n    isEmojiPickerOpen = true;\n\n}\n\nfunction closeEmojiPicker() {\n    const messageId = document.getElementById('emojiPicker').dataset.messageId;\n    const reactionTextField = document.getElementById('additionalTextField');\n\n    if (messageId && reactionTextField) {\n        reactions[messageId].text = reactionTextField.value;\n    }\n\n    updateReactions();\n\n    // Remove .editing class from the currently edited message\n    const currentlyEditingMessage = document.getElementById(currentlyEditingMessageId);\n    if (currentlyEditingMessage) {\n        currentlyEditingMessage.classList.remove('editing');\n    }\n\n    // Reset the currently editing message ID globally\n    currentlyEditingMessageId = null;\n\n    // Remove blur from other elements\n    const blurElements = document.querySelectorAll('.blur');\n    blurElements.forEach(element => {\n        element.classList.remove('blur');\n    });\n    // END OF BLUR CODE\n\n    const readyButton = document.getElementById('readyButton');\n    if (readyButton) {\n        readyButton.disabled = false;\n        readyButton.style.display = 'block';\n    }\n\n    const emojiPicker = document.getElementById('emojiPicker');\n    emojiPicker.style.display = 'none';\n\n    updateReactions();\n\n    isEmojiPickerOpen = false;\n}\n\nfunction selectEmoji(emoji) {\n    const messageId = document.getElementById('emojiPicker').dataset.messageId;\n    const emojiContainer = document.querySelector('.emojiContainer');\n\n    // Remove the 'selected' class from all emojis\n    emojiContainer.querySelectorAll('.emoji').forEach(el => el.classList.remove('selected'));\n\n    // Add the 'selected' class to the clicked emoji\n    const selectedEmoji = emojiContainer.querySelector(`[data-emoji=\"${emoji}\"]`);\n    if (selectedEmoji) {\n        selectedEmoji.classList.add('selected');\n    }\n    reactions[messageId].reaction = emoji; // new\n    updateReactions();\n}\n\nfunction deselectEmoji() {\n    const messageId = document.getElementById('emojiPicker').dataset.messageId;\n    const emojiContainer = document.querySelector('.emojiContainer');\n    const reactionTextField = document.getElementById('additionalTextField');\n    // Remove the 'selected' class from all emojis\n    emojiContainer.querySelectorAll('.emoji').forEach(el => el.classList.remove('selected'));\n\n    // clear textfield\n    reactionTextField.value = '';\n\n    reactions[messageId] = {\n        emoji: \"\", // Set the emoji to an empty string\n        text: \"\",  // Set the text to an empty string\n    };\n    closeEmojiPicker();\n}\n\nfunction updateReactions() {\n    const messageId = document.getElementById('emojiPicker').dataset.messageId;\n    const message = document.getElementById(messageId);\n    const emojiOverlay = message ? message.querySelector('.emojiOverlay') : null;\n\n    if (emojiOverlay) {\n        const { reaction } = reactions[messageId];\n\n        if (reaction) {\n            emojiOverlay.textContent = reaction;\n            emojiOverlay.style.display = 'block';\n        } else {\n            emojiOverlay.textContent = '';\n            emojiOverlay.style.display = 'none';\n        }\n    }\n}\n\nfunction updateSingleReaction(messageId) {\n    const message = document.getElementById(messageId);\n    const emojiOverlay = message ? message.querySelector('.emojiOverlay') : null;\n\n    if (emojiOverlay) {\n        const { reaction } = reactions[messageId];\n\n        if (reaction) {\n            emojiOverlay.textContent = reaction;\n            emojiOverlay.style.display = 'block';\n        } else {\n            emojiOverlay.textContent = '';\n            emojiOverlay.style.display = 'none';\n        }\n    }\n}\n\nfunction displayAgePanel() {\n    // Check if the age panel is already visible, if so, do nothing\n    if (agePanelVisible) {\n        console.log(\"AGE PANEL ALREADY VISIBLE\");\n        return;\n    }\n\n    // Create an overlay container for the age panel\n    const overlayContainer = document.createElement(\"div\");\n    overlayContainer.id = \"overlayContainer\";\n\n    // Create a container for the age input, confirm button, and back button\n    const agePanelContainer = document.createElement(\"div\");\n    agePanelContainer.id = \"agePanelContainer\";\n\n    // Create a label for the age input\n    const ageInputLabel = document.createElement(\"label\");\n    ageInputLabel.innerText = \"Vul je leeftijd in:\";\n    agePanelContainer.appendChild(ageInputLabel);\n\n    // Create an input field for age\n    const ageInput = document.createElement(\"input\");\n    ageInput.type = \"number\";\n    ageInput.id = \"ageInput\";\n    agePanelContainer.appendChild(ageInput);\n\n    // Create a confirm button\n    const confirmButton = document.createElement(\"button\");\n    confirmButton.innerText = \"Ok\";\n    confirmButton.id = \"confirmButton\";\n    agePanelContainer.appendChild(confirmButton);\n\n    // Create a back button\n    const backButton = document.createElement(\"button\");\n    backButton.innerText = \"Terug\";\n    backButton.id = \"backButton\";\n    agePanelContainer.appendChild(backButton);\n\n    // Append the age panel container to the overlay container\n    overlayContainer.appendChild(agePanelContainer);\n\n    // Append the overlay container to the body\n    document.body.appendChild(overlayContainer);\n\n    // Set agePanelVisible to true\n    agePanelVisible = true;\n\n    // Add event listener for the confirm button\n    confirmButton.addEventListener('click', () => {\n        var ageValue = document.getElementById(\"ageInput\").value;\n        if (!isNaN(ageValue) && ageValue >= 0) { /// NAN CHECK NOT WORKIGN IN FIREFOX\n            // Age is valid, store it and hide the age panel\n            age = ageValue;\n            overlayContainer.style.display = 'none';\n            agePanelVisible = false;\n            agePanelContainer.innerHTML = '';\n            exportReactions();\n\n        } else {\n            // Invalid age, show an error message (you can customize this)\n            console.log('invalid age');\n            alert(\"Gebruik een nummer\");\n        }\n    });\n\n    // Add event listener for the back button\n    backButton.addEventListener('click', () => {\n        // Hide the overlay\n        overlayContainer.style.display = 'none';\n        agePanelVisible = false;\n    });\n}\n\nfunction exportReactions() {\n    console.log(\"Confirm pressed\", age);\n    const jsonReactions = JSON.stringify({\n        reactions: reactions,\n        age: age // Include the age in the data\n    });\n\n    console.log(\"LAATSTE AGE: \", age);\n\n    furhat.send({\n        event_name: \"ClickButton\",\n        data: jsonReactions\n    })\n    console.log(jsonReactions);\n    displayStartButton();\n}\n\n\n// toggle the blur class on the body\nfunction addBlur() {\n    document.body.classList.add('blur');\n}\n\nfunction removeBlur() {\n    document.body.classList.remove('blur');\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9pbmRleC5qcz85NTUyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBGdXJoYXRHVUkgZnJvbSAnZnVyaGF0LWd1aSdcbmxldCByZWFjdGlvbnMgPSB7fTtcbmxldCBhZ2UgPSBudWxsO1xuXG5sZXQgY3VycmVudGx5RWRpdGluZ01lc3NhZ2VJZCA9IG51bGw7XG5sZXQgaXNFbW9qaVBpY2tlck9wZW4gPSBmYWxzZTtcbi8vY29uc3QgZW1vamlMaXN0ID0gWyfwn5iAJywgJ/CfmIInLCAn8J+YiicsICfwn5iOJywgJ/CfmJwnLCAn8J+YjScsICfwn5iYJywgJ/CfpbMnLCAn8J+RjScsICfwn5GOJ107XG5jb25zdCBlbW9qaUxpc3QgPSBbJ/CfpKknLCAn8J+YgScsICfwn5iDJywgJ/CfmIAnLCAn8J+ZgiddO1xubGV0IGZ1cmhhdCA9IG51bGw7XG5sZXQgYWdlUGFuZWxWaXNpYmxlID0gZmFsc2U7XG5cbmNvbnNvbGUubG9nKFwiSSBsb2FkZWRcIilcblxuXG57XG4gICAgRnVyaGF0R1VJKClcbiAgICAudGhlbihjb25uZWN0aW9uID0+IHtcbiAgICAgICAgZnVyaGF0ID0gY29ubmVjdGlvbjtcbiAgICAgICAgZnVyaGF0LnN1YnNjcmliZSgnZnVyaGF0b3MuYXBwLmJhc2Vfc2VhcmNoX2FnZW50LkRhdGFEZWxpdmVyeScsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAvLyBBY3RpdmF0ZXMgYW55IHRpbWUgaSByZWNlaXZlZCBzb21ldGjDrW5nIGZyb20gdGhlIEZIIHNpZGUhIERhdGFEZWxpdmVyeSBCYnlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgICAgICAgICBpZiAoZGF0YS5tZXNzYWdlc0xvZykge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlDaGF0UmVhY3RNb2RlKGRhdGEubWVzc2FnZXNMb2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS52aWRlb1VybCkge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlWaWRlb01vZGUoZGF0YS52aWRlb1VybClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuYnV0dG9ucykgeyB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdENvbnRhaW5lcicpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWRlb0NvbnRhaW5lcicpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFnZVBhbmVsQ29udGFpbmVyXCIpKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWdlUGFuZWxDb250YWluZXJcIikuaW5uZXJIVE1MID0gJyc7IH1cbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZWFkeUJ1dHRvblwiKSkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlYWR5QnV0dG9uQ29udGFpbmVyXCIpLmlubmVySFRNTCA9ICcnOyB9XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJnb3QgZW1wdHkgbWVzc2FnZVwiKTtcbiAgICAgICAgICAgICAgICAvL2Rpc3BsYXlTdGFydEJ1dHRvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIChldmVudCkgPT4ge1xuICAgIC8vIFlvdXIgY29kZSBoZXJlIHdpbGwgcnVuIG9uY2UgdGhlIERPTSBpcyBmdWxseSBsb2FkZWRcbiAgICBkaXNwbGF5U3RhcnRCdXR0b24oKTtcbn0pO1xuXG5cbmZ1bmN0aW9uIGRpc3BsYXlTdGFydEJ1dHRvbigpIHtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2Y0ZjRmNFwiO1xuICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFnZVBhbmVsQ29udGFpbmVyXCIpKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWdlUGFuZWxDb250YWluZXJcIikuaW5uZXJIVE1MID0gJyc7IH1cbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZWFkeUJ1dHRvblwiKSkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlYWR5QnV0dG9uQ29udGFpbmVyXCIpLmlubmVySFRNTCA9ICcnOyB9XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZGVvQ29udGFpbmVyJykuaW5uZXJIVE1MID0gJyc7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXRDb250YWluZXInKS5pbm5lckhUTUwgPSAnJztcblxuXG4gICAgY29uc3Qgc3RhcnRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBzdGFydEJ1dHRvbi5pZCA9ICdzdGFydEJ1dHRvbic7XG4gICAgc3RhcnRCdXR0b24uaW5uZXJUZXh0ID0gJ1N0YXJ0ISc7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zsb3dCdXR0b25Db250YWluZXInKS5hcHBlbmQoc3RhcnRCdXR0b24pO1xuICAgIC8vZG9jdW1lbnQuaW5uZXJIVE1MID0gc3RhcnRCdXR0b247XG5cbiAgICBzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBTZW5kIGRhdGEgdG8gZnVyaGF0XG4gICAgICAgIGZ1cmhhdC5zZW5kKHtcbiAgICAgICAgICAgIGV2ZW50X25hbWU6IFwiQ2xpY2tCdXR0b25cIixcbiAgICAgICAgICAgIGRhdGE6ICdzdGFydEJ1dHRvbidcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUmVkdWNlIHRoZSBicmlnaHRuZXNzIG9mIHRoZSBidXR0b25cbiAgICAgICAgdGhpcy5zdHlsZS5maWx0ZXIgPSBcImJyaWdodG5lc3MoNTAlKVwiO1xuICAgIH0pO1xufVxuXG5cbmZ1bmN0aW9uIGRpc3BsYXlWaWRlb01vZGUoaW5wdXQpIHtcbiAgICAvL2lmKGlucHV0LilcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiYmxhY2tcIjtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdENvbnRhaW5lcicpLmlubmVySFRNTCA9ICcnO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWRlb0NvbnRhaW5lcicpLmlubmVySFRNTCA9ICcnO1xuICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFnZVBhbmVsQ29udGFpbmVyXCIpKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWdlUGFuZWxDb250YWluZXJcIikuaW5uZXJIVE1MID0gJyc7IH1cbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZWFkeUJ1dHRvblwiKSkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlYWR5QnV0dG9uQ29udGFpbmVyXCIpLmlubmVySFRNTCA9ICcnOyB9XG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmxvd0J1dHRvbkNvbnRhaW5lclwiKSkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZsb3dCdXR0b25Db250YWluZXJcIikuaW5uZXJIVE1MID0gJyc7IH1cblxuICAgIC8vIENyZWF0ZSBhIG5ldyB2aWRlbyBlbGVtZW50XG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkXCIpKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkXCIpLm91dGVySFRNTCA9ICcnOyBjb25zb2xlLmxvZyhcIm9sZCB2aWQgcmVtb3ZlZFwiKSB9XG4gICAgY29uc3QgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuXG4gICAgLy8gU2V0IHRoZSB2aWRlbydzIHNvdXJjZVxuICAgIHZpZGVvLnNyYyA9IGlucHV0O1xuICAgIHZpZGVvLmNvbnRyb2xzID0gdHJ1ZTtcbiAgICB2aWRlby5hdXRvcGxheSA9IHRydWU7XG4gICAgdmlkZW8uaWQgPSBcInZpZFwiO1xuXG4gICAgLy8gU2V0IHNvbWUgb3B0aW9uYWwgYXR0cmlidXRlcywgbGlrZSB3aWR0aCBhbmQgaGVpZ2h0XG4gICAgdmlkZW8ud2lkdGggPSA2NDA7ICAgLy8gWW91IGNhbiBhZGp1c3QgdGhpcyB2YWx1ZVxuICAgIHZpZGVvLmhlaWdodCA9IDQ4MDsgIC8vIFlvdSBjYW4gYWRqdXN0IHRoaXMgdmFsdWVcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlkZW9Db250YWluZXInKS5hcHBlbmQodmlkZW8pO1xuXG4gICAgY29uc3QgdmlkRG9uZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHZpZERvbmVCdXR0b24uaWQgPSBcInZpZERvbmVCdXR0b25cIjtcbiAgICB2aWREb25lQnV0dG9uLmlubmVyVGV4dCA9IFwiSWsgYmVuIGtsYWFyIG1ldCBraWprZW5cIlxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWRlb0NvbnRhaW5lcicpLmFwcGVuZCh2aWREb25lQnV0dG9uKTtcblxuICAgIHZpZERvbmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PlxuICAgICAgICBmdXJoYXQuc2VuZCh7XG4gICAgICAgICAgICBldmVudF9uYW1lOiBcIkNsaWNrQnV0dG9uXCIsXG4gICAgICAgICAgICBkYXRhOiAndmlkRG9uZUJ1dHRvbidcbiAgICAgICAgfSkpO1xuXG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlDaGF0UmVhY3RNb2RlKGlucHV0KSB7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNmNGY0ZjRcIjtcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmbG93QnV0dG9uQ29udGFpbmVyXCIpKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmxvd0J1dHRvbkNvbnRhaW5lclwiKS5pbm5lckhUTUwgPSAnJzsgfVxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWRlb0NvbnRhaW5lcicpLmlubmVySFRNTCA9ICcnO1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXRDb250YWluZXInKSkgeyBkb2N1bWVudCB9XG4gICAgY29uc29sZS5sb2coXCJyYW4gZGlzcGxheWNoYXRyZWFjdG1vZGVcIik7XG4gICAgcmVhY3Rpb25zID0ge307XG4gICAgYWRkTWVzc2FnZXNUb0RPTShpbnB1dClcblxuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZWFkeUJ1dHRvblwiKSkge1xuICAgICAgICAvLyBDcmVhdGUgYSBjb250YWluZXIgZm9yIHRoZSBidXR0b24gYW5kIHNlcGFyYXRvclxuICAgICAgICB2YXIgcmVhZHlCdXR0b25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICByZWFkeUJ1dHRvbkNvbnRhaW5lci5pZCA9IFwicmVhZHlCdXR0b25Db250YWluZXJcIjsgLy8gU2V0IGFuIElEIG9yIGNsYXNzIGZvciBzdHlsaW5nIGlmIG5lZWRlZFxuXG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBidXR0b24gZWxlbWVudFxuICAgICAgICB2YXIgcmVhZHlCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICByZWFkeUJ1dHRvbi5pZCA9IFwicmVhZHlCdXR0b25cIjsgLy8gU2V0IGF0dHJpYnV0ZXMgZm9yIHRoZSBidXR0b25cbiAgICAgICAgcmVhZHlCdXR0b24uaW5uZXJUZXh0ID0gXCJJayBiZW4ga2xhYXIhXCI7IC8vIFlvdSBjYW4gY2hhbmdlIHRoZSBidXR0b24gdGV4dCBoZXJlXG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgc2VwYXJhdG9yXG4gICAgICAgIHZhciBzZXBhcmF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHJcIik7XG4gICAgICAgIHNlcGFyYXRvci5jbGFzc05hbWUgPSBcInNlcGFyYXRvclwiO1xuXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgc2VwYXJhdG9yIGFuZCB0aGUgYnV0dG9uIHRvIHRoZSBjb250YWluZXJcbiAgICAgICAgcmVhZHlCdXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoc2VwYXJhdG9yKTtcbiAgICAgICAgcmVhZHlCdXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQocmVhZHlCdXR0b24pO1xuXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgY29udGFpbmVyIHRvIHRoZSBib2R5IG9mIHRoZSBkb2N1bWVudFxuICAgICAgICAvLyBZb3UgY2FuIGNoYW5nZSAnZG9jdW1lbnQuYm9keScgdG8gYXBwZW5kIGl0IHRvIGEgZGlmZmVyZW50IGVsZW1lbnRcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyZWFkeUJ1dHRvbkNvbnRhaW5lcik7XG5cbiAgICAgICAgLy8gQWRkIGEgY2xpY2sgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGJ1dHRvblxuICAgICAgICByZWFkeUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGRpc3BsYXlBZ2VQYW5lbCgpKTsgLy9leHBvcnRSZWFjdGlvbnMoKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGRNZXNzYWdlc1RvRE9NKG1lc3NhZ2VzSnNvbikge1xuICAgIGNvbnNvbGUubG9nKG1lc3NhZ2VzSnNvbilcbiAgICB2YXIgcGFyc2VkRGF0YSA9IEpTT04ucGFyc2UobWVzc2FnZXNKc29uKVxuICAgIGNvbnNvbGUubG9nKHBhcnNlZERhdGEubWVzc2FnZXNbMF0udGV4dClcblxuICAgIHBhcnNlZERhdGEubWVzc2FnZXMuZm9yRWFjaChtZXNzYWdlID0+IHtcbiAgICAgICAgLy8gQ3JlYXRlIGRpdnMgYW5kIG90aGVyIGVsZW1lbnRzXG4gICAgICAgIGxldCBidWJibGVXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGJ1YmJsZVdyYXBwZXIuY2xhc3NOYW1lID0gJ2J1YmJsZVdyYXBwZXInO1xuICAgICAgICBsZXQgaW5saW5lQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgaWYgKG1lc3NhZ2Uud2hvID09IFwicm9ib3RcIikge1xuICAgICAgICAgICAgaW5saW5lQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdpbmxpbmVDb250YWluZXInO1xuXG4gICAgICAgICAgICBsZXQgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgaWNvbi5jbGFzc05hbWUgPSAnaW5saW5lSWNvbic7XG4gICAgICAgICAgICBpY29uLnNyYyA9ICdzcmMvcmIucG5nJzsgLy8gQWRqdXN0IHRoZSBzb3VyY2UgYXMgbmVlZGVkXG5cbiAgICAgICAgICAgIGxldCBidWJibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGJ1YmJsZS5jbGFzc05hbWUgPSAnb3RoZXJCdWJibGUgb3RoZXInO1xuICAgICAgICAgICAgYnViYmxlLmlkID0gbWVzc2FnZS5pZDtcbiAgICAgICAgICAgIGJ1YmJsZS50ZXh0Q29udGVudCA9IG1lc3NhZ2UudGV4dDtcbiAgICAgICAgICAgIGJ1YmJsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IG9wZW5FbW9qaVBpY2tlcihtZXNzYWdlLmlkKSk7XG5cbiAgICAgICAgICAgIGxldCByZWFjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgcmVhY3Rpb24uaWQgPSBtZXNzYWdlLmVtb2ppSWQ7XG4gICAgICAgICAgICByZWFjdGlvbi5jbGFzc05hbWUgPSAncmVhY3Rpb24nO1xuXG4gICAgICAgICAgICBsZXQgZW1vamlPdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBlbW9qaU92ZXJsYXkuY2xhc3NOYW1lID0gJ2Vtb2ppT3ZlcmxheSc7XG5cbiAgICAgICAgICAgIC8vIEFwcGVuZCBjaGlsZCBlbGVtZW50c1xuICAgICAgICAgICAgcmVhY3Rpb24uYXBwZW5kQ2hpbGQoZW1vamlPdmVybGF5KTtcbiAgICAgICAgICAgIGJ1YmJsZS5hcHBlbmRDaGlsZChyZWFjdGlvbik7XG4gICAgICAgICAgICBpbmxpbmVDb250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbik7XG4gICAgICAgICAgICBpbmxpbmVDb250YWluZXIuYXBwZW5kQ2hpbGQoYnViYmxlKTtcbiAgICAgICAgICAgIGJ1YmJsZVdyYXBwZXIuYXBwZW5kQ2hpbGQoaW5saW5lQ29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZXNzYWdlLndobyA9PSBcImtpZFwiKSB7XG4gICAgICAgICAgICBpbmxpbmVDb250YWluZXIuY2xhc3NOYW1lID0gJ2lubGluZUNvbnRhaW5lciBvd24nO1xuICAgICAgICAgICAgbGV0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgIGljb24uY2xhc3NOYW1lID0gJ2lubGluZUljb24nO1xuICAgICAgICAgICAgaWNvbi5zcmMgPSAnc3JjL2ppai5wbmcnOyAvLyBBZGp1c3QgdGhlIHNvdXJjZSBhcyBuZWVkZWRcblxuICAgICAgICAgICAgbGV0IGJ1YmJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgYnViYmxlLmNsYXNzTmFtZSA9ICdvd25CdWJibGUgb3duJztcbiAgICAgICAgICAgIGJ1YmJsZS5pZCA9IG1lc3NhZ2UuaWQ7XG4gICAgICAgICAgICBidWJibGUudGV4dENvbnRlbnQgPSBtZXNzYWdlLnRleHQ7XG5cbiAgICAgICAgICAgIGlubGluZUNvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uKTtcbiAgICAgICAgICAgIGlubGluZUNvbnRhaW5lci5hcHBlbmRDaGlsZChidWJibGUpO1xuICAgICAgICAgICAgYnViYmxlV3JhcHBlci5hcHBlbmRDaGlsZChpbmxpbmVDb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVhY3Rpb25zW21lc3NhZ2UuaWRdID0ge1xuICAgICAgICAgICAgcmVhY3Rpb246IG1lc3NhZ2UuZW1vamlJZCxcbiAgICAgICAgICAgIHRleHQ6ICcnLFxuICAgICAgICAgICAgdXR0ZXJhbmNlOiBtZXNzYWdlLnRleHQsIC8vIFN0b3JlIHRoZSB0ZXh0IGl0IHdhcyBiYXNlZCBvblxuICAgICAgICAgICAgc3RhcnRUaW1lOiBtZXNzYWdlLnN0YXJ0VGltZSwgLy8gQWRkIGEgc3RhcnRUaW1lIHByb3BlcnR5IGlmIG5lZWRlZFxuICAgICAgICAgICAgd2hvOiBtZXNzYWdlLndoby8vIEFkZCBvdGhlciBwcm9wZXJ0aWVzIGFzIG5lZWRlZFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEFwcGVuZCB0byBkb2N1bWVudFxuICAgICAgICAvLyBBc3N1bWluZyBidWJibGVXcmFwcGVyIGlzIGFscmVhZHkgZGVmaW5lZCBhbmQgeW91IHdhbnQgdG8gYXBwZW5kIGl0IHRvIGEgZGl2IHdpdGggdGhlIGlkICdjaGF0J1xuICAgICAgICB2YXIgY2hhdERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0Q29udGFpbmVyJyk7XG4gICAgICAgIGNoYXREaXYuYXBwZW5kQ2hpbGQoYnViYmxlV3JhcHBlcik7XG4gICAgICAgIHVwZGF0ZVNpbmdsZVJlYWN0aW9uKG1lc3NhZ2UuaWQpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBvcGVuRW1vamlQaWNrZXIobWVzc2FnZUlkKSB7Ly8sIGV4aXN0aW5nUmVhY3Rpb24gPSAnJykge1xuICAgIC8vIEJMVVIgQ09ERVxuICAgIC8vIFNldCB0aGUgY3VycmVudGx5IGVkaXRpbmcgbWVzc2FnZSBJRCBnbG9iYWxseVxuICAgIGN1cnJlbnRseUVkaXRpbmdNZXNzYWdlSWQgPSBtZXNzYWdlSWQ7XG5cbiAgICAvLyBBcHBseSBibHVyIHRvIG90aGVyIGVsZW1lbnRzXG4gICAgY29uc3QgYWxsTWVzc2FnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3RoZXJCdWJibGUsIC5vd25CdWJibGUsIC5pbmxpbmVJY29uLCAuaW5saW5lQ29udGFpbmVyLm93biwgLnJlYWR5QnV0dG9uJyk7XG4gICAgYWxsTWVzc2FnZXMuZm9yRWFjaChtZXNzYWdlID0+IHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaWQgIT0gXCJcIiAmJiBtZXNzYWdlLmlkICE9IG1lc3NhZ2VJZCkge1xuICAgICAgICAgICAgbWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdibHVyJyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvLy8vLyBFTkQgb2YgYmx1ciBDT0RFXG5cbiAgICBjb25zdCByZWFkeUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWFkeUJ1dHRvbicpO1xuICAgIGlmIChyZWFkeUJ1dHRvbikge1xuICAgICAgICByZWFkeUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cblxuICAgIC8vIEdldCB0aGUgcG9zaXRpb24gb2YgdGhlIHNlbGVjdGVkIG1lc3NhZ2VcbiAgICBjb25zdCBzZWxlY3RlZE1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtZXNzYWdlSWQpO1xuICAgIGlmICghc2VsZWN0ZWRNZXNzYWdlKSB7XG4gICAgICAgIHJldHVybjsgLy8gSGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSBzZWxlY3RlZCBtZXNzYWdlIGlzIG5vdCBmb3VuZFxuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdGVkTWVzc2FnZVJlY3QgPSBzZWxlY3RlZE1lc3NhZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHBvc2l0aW9uIGZvciB0aGUgZW1vamkgcGlja2VyXG4gICAgY29uc3QgZW1vamlQaWNrZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1vamlQaWNrZXInKTtcbiAgICBpZiAoZW1vamlQaWNrZXIpIHtcbiAgICAgICAgZW1vamlQaWNrZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGVtb2ppUGlja2VyLmRhdGFzZXQubWVzc2FnZUlkID0gbWVzc2FnZUlkO1xuICAgICAgICBsZXQgdG9wUG9zaXRpb24gPSBzZWxlY3RlZE1lc3NhZ2VSZWN0LnRvcCArIDEyMDsgLy8gSW5pdGlhbCBvZmZzZXQsIGFkanVzdCBhcyBuZWVkZWRcbiAgICAgICAgbGV0IGxlZnRQb3NpdGlvbiA9IHNlbGVjdGVkTWVzc2FnZVJlY3QucmlnaHQgKyAyMzI7IC8vIEFkanVzdCB0aGUgb2Zmc2V0IGFzIG5lZWRlZFxuXG4gICAgICAgIC8vIEVuc3VyZSB0aGUgZW1vamkgcGlja2VyIGRvZXMgbm90IGV4Y2VlZCB0aGUgc2NyZWVuIGhlaWdodFxuICAgICAgICBjb25zdCBzY3JlZW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIGNvbnN0IHBpY2tlckhlaWdodCA9IGVtb2ppUGlja2VyLm9mZnNldEhlaWdodDtcblxuICAgICAgICBpZiAodG9wUG9zaXRpb24gKyBwaWNrZXJIZWlnaHQgPiBzY3JlZW5IZWlnaHQpIHtcbiAgICAgICAgICAgIHRvcFBvc2l0aW9uID0gc2NyZWVuSGVpZ2h0IC0gcGlja2VySGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1pbmltdW1Ub3BPZmZzZXQgPSAyMDsgLy8gQWRqdXN0IGFzIG5lZWRlZFxuICAgICAgICB0b3BQb3NpdGlvbiA9IE1hdGgubWF4KG1pbmltdW1Ub3BPZmZzZXQsIHRvcFBvc2l0aW9uKTtcblxuXG4gICAgICAgIC8vIFNldCB0aGUgZmluYWwgcG9zaXRpb24gb2YgdGhlIGVtb2ppIHBpY2tlclxuICAgICAgICBlbW9qaVBpY2tlci5zdHlsZS50b3AgPSBgJHtNYXRoLm1heCgwLCB0b3BQb3NpdGlvbil9cHhgO1xuICAgICAgICBlbW9qaVBpY2tlci5zdHlsZS5sZWZ0ID0gYCR7TWF0aC5tYXgoMCwgbGVmdFBvc2l0aW9uKX1weGA7XG4gICAgfVxuXG4gICAgaWYgKCFyZWFjdGlvbnNbbWVzc2FnZUlkXSkge1xuICAgICAgICByZWFjdGlvbnNbbWVzc2FnZUlkXSA9IHsgcmVhY3Rpb246ICcnIH07XG4gICAgfVxuXG4gICAgY29uc3QgZXhpc3RpbmdSZWFjdGlvbiA9IHJlYWN0aW9uc1ttZXNzYWdlSWRdLnJlYWN0aW9uO1xuXG4gICAgY29uc3QgZW1vamlDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZW1vamlDb250YWluZXInKTtcbiAgICBlbW9qaUNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcblxuICAgIGVtb2ppTGlzdC5mb3JFYWNoKGVtb2ppID0+IHtcbiAgICAgICAgY29uc3QgZW1vamlTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBlbW9qaVNwYW4uY2xhc3NMaXN0LmFkZCgnZW1vamknKTtcbiAgICAgICAgZW1vamlTcGFuLnRleHRDb250ZW50ID0gZW1vamk7XG4gICAgICAgIGVtb2ppU3Bhbi5kYXRhc2V0LmVtb2ppID0gZW1vamk7XG5cbiAgICAgICAgaWYgKGV4aXN0aW5nUmVhY3Rpb24gPT09IGVtb2ppKSB7XG4gICAgICAgICAgICBlbW9qaVNwYW4uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVtb2ppU3Bhbi5vbmNsaWNrID0gKCkgPT4gc2VsZWN0RW1vamkoZW1vamkpO1xuICAgICAgICBlbW9qaUNvbnRhaW5lci5hcHBlbmRDaGlsZChlbW9qaVNwYW4pO1xuICAgIH0pO1xuXG4gICAgY29uc3QgZXhpc3RpbmdUZXh0ID0gcmVhY3Rpb25zW21lc3NhZ2VJZF0udGV4dCB8fCAnJztcblxuICAgIGNvbnN0IHJlYWN0aW9uVGV4dEZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZGl0aW9uYWxUZXh0RmllbGQnKTtcbiAgICBpZiAocmVhY3Rpb25UZXh0RmllbGQpIHtcbiAgICAgICAgcmVhY3Rpb25UZXh0RmllbGQudmFsdWUgPSBleGlzdGluZ1RleHQ7XG4gICAgfVxuXG4gICAgbGV0IHJlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVtb3ZlQnV0dG9uXCIpXG4gICAgcmVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZGVzZWxlY3RFbW9qaSgpKTtcblxuICAgIGxldCBjbG9zZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xvc2VCdXR0b25cIilcbiAgICBjbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGNsb3NlRW1vamlQaWNrZXIoKSk7XG5cbiAgICBpc0Vtb2ppUGlja2VyT3BlbiA9IHRydWU7XG5cbn1cblxuZnVuY3Rpb24gY2xvc2VFbW9qaVBpY2tlcigpIHtcbiAgICBjb25zdCBtZXNzYWdlSWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1vamlQaWNrZXInKS5kYXRhc2V0Lm1lc3NhZ2VJZDtcbiAgICBjb25zdCByZWFjdGlvblRleHRGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRpdGlvbmFsVGV4dEZpZWxkJyk7XG5cbiAgICBpZiAobWVzc2FnZUlkICYmIHJlYWN0aW9uVGV4dEZpZWxkKSB7XG4gICAgICAgIHJlYWN0aW9uc1ttZXNzYWdlSWRdLnRleHQgPSByZWFjdGlvblRleHRGaWVsZC52YWx1ZTtcbiAgICB9XG5cbiAgICB1cGRhdGVSZWFjdGlvbnMoKTtcblxuICAgIC8vIFJlbW92ZSAuZWRpdGluZyBjbGFzcyBmcm9tIHRoZSBjdXJyZW50bHkgZWRpdGVkIG1lc3NhZ2VcbiAgICBjb25zdCBjdXJyZW50bHlFZGl0aW5nTWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGN1cnJlbnRseUVkaXRpbmdNZXNzYWdlSWQpO1xuICAgIGlmIChjdXJyZW50bHlFZGl0aW5nTWVzc2FnZSkge1xuICAgICAgICBjdXJyZW50bHlFZGl0aW5nTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKCdlZGl0aW5nJyk7XG4gICAgfVxuXG4gICAgLy8gUmVzZXQgdGhlIGN1cnJlbnRseSBlZGl0aW5nIG1lc3NhZ2UgSUQgZ2xvYmFsbHlcbiAgICBjdXJyZW50bHlFZGl0aW5nTWVzc2FnZUlkID0gbnVsbDtcblxuICAgIC8vIFJlbW92ZSBibHVyIGZyb20gb3RoZXIgZWxlbWVudHNcbiAgICBjb25zdCBibHVyRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYmx1cicpO1xuICAgIGJsdXJFbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2JsdXInKTtcbiAgICB9KTtcbiAgICAvLyBFTkQgT0YgQkxVUiBDT0RFXG5cbiAgICBjb25zdCByZWFkeUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWFkeUJ1dHRvbicpO1xuICAgIGlmIChyZWFkeUJ1dHRvbikge1xuICAgICAgICByZWFkeUJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICByZWFkeUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9XG5cbiAgICBjb25zdCBlbW9qaVBpY2tlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbW9qaVBpY2tlcicpO1xuICAgIGVtb2ppUGlja2VyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICB1cGRhdGVSZWFjdGlvbnMoKTtcblxuICAgIGlzRW1vamlQaWNrZXJPcGVuID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdEVtb2ppKGVtb2ppKSB7XG4gICAgY29uc3QgbWVzc2FnZUlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vtb2ppUGlja2VyJykuZGF0YXNldC5tZXNzYWdlSWQ7XG4gICAgY29uc3QgZW1vamlDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZW1vamlDb250YWluZXInKTtcblxuICAgIC8vIFJlbW92ZSB0aGUgJ3NlbGVjdGVkJyBjbGFzcyBmcm9tIGFsbCBlbW9qaXNcbiAgICBlbW9qaUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZW1vamknKS5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJykpO1xuXG4gICAgLy8gQWRkIHRoZSAnc2VsZWN0ZWQnIGNsYXNzIHRvIHRoZSBjbGlja2VkIGVtb2ppXG4gICAgY29uc3Qgc2VsZWN0ZWRFbW9qaSA9IGVtb2ppQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWVtb2ppPVwiJHtlbW9qaX1cIl1gKTtcbiAgICBpZiAoc2VsZWN0ZWRFbW9qaSkge1xuICAgICAgICBzZWxlY3RlZEVtb2ppLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgfVxuICAgIHJlYWN0aW9uc1ttZXNzYWdlSWRdLnJlYWN0aW9uID0gZW1vamk7IC8vIG5ld1xuICAgIHVwZGF0ZVJlYWN0aW9ucygpO1xufVxuXG5mdW5jdGlvbiBkZXNlbGVjdEVtb2ppKCkge1xuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbW9qaVBpY2tlcicpLmRhdGFzZXQubWVzc2FnZUlkO1xuICAgIGNvbnN0IGVtb2ppQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVtb2ppQ29udGFpbmVyJyk7XG4gICAgY29uc3QgcmVhY3Rpb25UZXh0RmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkaXRpb25hbFRleHRGaWVsZCcpO1xuICAgIC8vIFJlbW92ZSB0aGUgJ3NlbGVjdGVkJyBjbGFzcyBmcm9tIGFsbCBlbW9qaXNcbiAgICBlbW9qaUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZW1vamknKS5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJykpO1xuXG4gICAgLy8gY2xlYXIgdGV4dGZpZWxkXG4gICAgcmVhY3Rpb25UZXh0RmllbGQudmFsdWUgPSAnJztcblxuICAgIHJlYWN0aW9uc1ttZXNzYWdlSWRdID0ge1xuICAgICAgICBlbW9qaTogXCJcIiwgLy8gU2V0IHRoZSBlbW9qaSB0byBhbiBlbXB0eSBzdHJpbmdcbiAgICAgICAgdGV4dDogXCJcIiwgIC8vIFNldCB0aGUgdGV4dCB0byBhbiBlbXB0eSBzdHJpbmdcbiAgICB9O1xuICAgIGNsb3NlRW1vamlQaWNrZXIoKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlUmVhY3Rpb25zKCkge1xuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbW9qaVBpY2tlcicpLmRhdGFzZXQubWVzc2FnZUlkO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtZXNzYWdlSWQpO1xuICAgIGNvbnN0IGVtb2ppT3ZlcmxheSA9IG1lc3NhZ2UgPyBtZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5lbW9qaU92ZXJsYXknKSA6IG51bGw7XG5cbiAgICBpZiAoZW1vamlPdmVybGF5KSB7XG4gICAgICAgIGNvbnN0IHsgcmVhY3Rpb24gfSA9IHJlYWN0aW9uc1ttZXNzYWdlSWRdO1xuXG4gICAgICAgIGlmIChyZWFjdGlvbikge1xuICAgICAgICAgICAgZW1vamlPdmVybGF5LnRleHRDb250ZW50ID0gcmVhY3Rpb247XG4gICAgICAgICAgICBlbW9qaU92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbW9qaU92ZXJsYXkudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgICAgIGVtb2ppT3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVTaW5nbGVSZWFjdGlvbihtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWVzc2FnZUlkKTtcbiAgICBjb25zdCBlbW9qaU92ZXJsYXkgPSBtZXNzYWdlID8gbWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcuZW1vamlPdmVybGF5JykgOiBudWxsO1xuXG4gICAgaWYgKGVtb2ppT3ZlcmxheSkge1xuICAgICAgICBjb25zdCB7IHJlYWN0aW9uIH0gPSByZWFjdGlvbnNbbWVzc2FnZUlkXTtcblxuICAgICAgICBpZiAocmVhY3Rpb24pIHtcbiAgICAgICAgICAgIGVtb2ppT3ZlcmxheS50ZXh0Q29udGVudCA9IHJlYWN0aW9uO1xuICAgICAgICAgICAgZW1vamlPdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW1vamlPdmVybGF5LnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgICAgICBlbW9qaU92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZGlzcGxheUFnZVBhbmVsKCkge1xuICAgIC8vIENoZWNrIGlmIHRoZSBhZ2UgcGFuZWwgaXMgYWxyZWFkeSB2aXNpYmxlLCBpZiBzbywgZG8gbm90aGluZ1xuICAgIGlmIChhZ2VQYW5lbFZpc2libGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJBR0UgUEFORUwgQUxSRUFEWSBWSVNJQkxFXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGFuIG92ZXJsYXkgY29udGFpbmVyIGZvciB0aGUgYWdlIHBhbmVsXG4gICAgY29uc3Qgb3ZlcmxheUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgb3ZlcmxheUNvbnRhaW5lci5pZCA9IFwib3ZlcmxheUNvbnRhaW5lclwiO1xuXG4gICAgLy8gQ3JlYXRlIGEgY29udGFpbmVyIGZvciB0aGUgYWdlIGlucHV0LCBjb25maXJtIGJ1dHRvbiwgYW5kIGJhY2sgYnV0dG9uXG4gICAgY29uc3QgYWdlUGFuZWxDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGFnZVBhbmVsQ29udGFpbmVyLmlkID0gXCJhZ2VQYW5lbENvbnRhaW5lclwiO1xuXG4gICAgLy8gQ3JlYXRlIGEgbGFiZWwgZm9yIHRoZSBhZ2UgaW5wdXRcbiAgICBjb25zdCBhZ2VJbnB1dExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIGFnZUlucHV0TGFiZWwuaW5uZXJUZXh0ID0gXCJWdWwgamUgbGVlZnRpamQgaW46XCI7XG4gICAgYWdlUGFuZWxDb250YWluZXIuYXBwZW5kQ2hpbGQoYWdlSW5wdXRMYWJlbCk7XG5cbiAgICAvLyBDcmVhdGUgYW4gaW5wdXQgZmllbGQgZm9yIGFnZVxuICAgIGNvbnN0IGFnZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGFnZUlucHV0LnR5cGUgPSBcIm51bWJlclwiO1xuICAgIGFnZUlucHV0LmlkID0gXCJhZ2VJbnB1dFwiO1xuICAgIGFnZVBhbmVsQ29udGFpbmVyLmFwcGVuZENoaWxkKGFnZUlucHV0KTtcblxuICAgIC8vIENyZWF0ZSBhIGNvbmZpcm0gYnV0dG9uXG4gICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgY29uZmlybUJ1dHRvbi5pbm5lclRleHQgPSBcIk9rXCI7XG4gICAgY29uZmlybUJ1dHRvbi5pZCA9IFwiY29uZmlybUJ1dHRvblwiO1xuICAgIGFnZVBhbmVsQ29udGFpbmVyLmFwcGVuZENoaWxkKGNvbmZpcm1CdXR0b24pO1xuXG4gICAgLy8gQ3JlYXRlIGEgYmFjayBidXR0b25cbiAgICBjb25zdCBiYWNrQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBiYWNrQnV0dG9uLmlubmVyVGV4dCA9IFwiVGVydWdcIjtcbiAgICBiYWNrQnV0dG9uLmlkID0gXCJiYWNrQnV0dG9uXCI7XG4gICAgYWdlUGFuZWxDb250YWluZXIuYXBwZW5kQ2hpbGQoYmFja0J1dHRvbik7XG5cbiAgICAvLyBBcHBlbmQgdGhlIGFnZSBwYW5lbCBjb250YWluZXIgdG8gdGhlIG92ZXJsYXkgY29udGFpbmVyXG4gICAgb3ZlcmxheUNvbnRhaW5lci5hcHBlbmRDaGlsZChhZ2VQYW5lbENvbnRhaW5lcik7XG5cbiAgICAvLyBBcHBlbmQgdGhlIG92ZXJsYXkgY29udGFpbmVyIHRvIHRoZSBib2R5XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5Q29udGFpbmVyKTtcblxuICAgIC8vIFNldCBhZ2VQYW5lbFZpc2libGUgdG8gdHJ1ZVxuICAgIGFnZVBhbmVsVmlzaWJsZSA9IHRydWU7XG5cbiAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBjb25maXJtIGJ1dHRvblxuICAgIGNvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHZhciBhZ2VWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWdlSW5wdXRcIikudmFsdWU7XG4gICAgICAgIGlmICghaXNOYU4oYWdlVmFsdWUpICYmIGFnZVZhbHVlID49IDApIHsgLy8vIE5BTiBDSEVDSyBOT1QgV09SS0lHTiBJTiBGSVJFRk9YXG4gICAgICAgICAgICAvLyBBZ2UgaXMgdmFsaWQsIHN0b3JlIGl0IGFuZCBoaWRlIHRoZSBhZ2UgcGFuZWxcbiAgICAgICAgICAgIGFnZSA9IGFnZVZhbHVlO1xuICAgICAgICAgICAgb3ZlcmxheUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgYWdlUGFuZWxWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICBhZ2VQYW5lbENvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIGV4cG9ydFJlYWN0aW9ucygpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJbnZhbGlkIGFnZSwgc2hvdyBhbiBlcnJvciBtZXNzYWdlICh5b3UgY2FuIGN1c3RvbWl6ZSB0aGlzKVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2ludmFsaWQgYWdlJyk7XG4gICAgICAgICAgICBhbGVydChcIkdlYnJ1aWsgZWVuIG51bW1lclwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQWRkIGV2ZW50IGxpc3RlbmVyIGZvciB0aGUgYmFjayBidXR0b25cbiAgICBiYWNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAvLyBIaWRlIHRoZSBvdmVybGF5XG4gICAgICAgIG92ZXJsYXlDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgYWdlUGFuZWxWaXNpYmxlID0gZmFsc2U7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGV4cG9ydFJlYWN0aW9ucygpIHtcbiAgICBjb25zb2xlLmxvZyhcIkNvbmZpcm0gcHJlc3NlZFwiLCBhZ2UpO1xuICAgIGNvbnN0IGpzb25SZWFjdGlvbnMgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHJlYWN0aW9uczogcmVhY3Rpb25zLFxuICAgICAgICBhZ2U6IGFnZSAvLyBJbmNsdWRlIHRoZSBhZ2UgaW4gdGhlIGRhdGFcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKFwiTEFBVFNURSBBR0U6IFwiLCBhZ2UpO1xuXG4gICAgZnVyaGF0LnNlbmQoe1xuICAgICAgICBldmVudF9uYW1lOiBcIkNsaWNrQnV0dG9uXCIsXG4gICAgICAgIGRhdGE6IGpzb25SZWFjdGlvbnNcbiAgICB9KVxuICAgIGNvbnNvbGUubG9nKGpzb25SZWFjdGlvbnMpO1xuICAgIGRpc3BsYXlTdGFydEJ1dHRvbigpO1xufVxuXG5cbi8vIHRvZ2dsZSB0aGUgYmx1ciBjbGFzcyBvbiB0aGUgYm9keVxuZnVuY3Rpb24gYWRkQmx1cigpIHtcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2JsdXInKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQmx1cigpIHtcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2JsdXInKTtcbn1cblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n");

/***/ })
/******/ ]);